(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-729f928a"],{2222:function(a,n,t){},"2b2e":function(a,n,t){"use strict";var s=function(){var a=this,n=a.$createElement,t=a._self._c||n;return t("div",{staticClass:"navigate-bar"},[t("span",{staticClass:"iconfont iconjiantou2",on:{click:function(n){return a.$router.back()}}}),t("strong",[a._v(a._s(a.title))]),a.showHome?t("span",{staticClass:"iconfont iconshouye",on:{click:function(n){return a.$router.push("./")}}}):t("span",{staticClass:"iconfont iconshouye",staticStyle:{opacity:"0"}})])},e=[],o={props:["title","showHome"]},i=o,r=(t("c094"),t("2877")),c=Object(r["a"])(i,s,e,!1,null,"54257c89",null);n["a"]=c.exports},"34a6":function(a,n,t){"use strict";var s=function(){var a=this,n=a.$createElement,t=a._self._c||n;return t("div",{staticClass:"listbar"},[t("router-link",{attrs:{to:a.path||"#"}},[t("div",[a._v(a._s(a.label))]),t("div",{staticClass:"tips"},[a._v(" "+a._s(a.tips)+" "),t("span",{staticClass:"iconfont iconjiantou1"})])])],1)},e=[],o={props:["label","tips","path"]},i=o,r=(t("75d8"),t("2877")),c=Object(r["a"])(i,s,e,!1,null,"54855f12",null);n["a"]=c.exports},6670:function(a,n,t){},"75d8":function(a,n,t){"use strict";var s=t("6670"),e=t.n(s);e.a},a655:function(a,n,t){},c094:function(a,n,t){"use strict";var s=t("2222"),e=t.n(s);e.a},c90e:function(a,n,t){"use strict";t.r(n);var s=function(){var a=this,n=a.$createElement,t=a._self._c||n;return t("div",{staticClass:"w"},[t("NavigateBar",{attrs:{title:"编辑资料",showHome:""}}),t("div",{staticClass:"avatar"},[t("img",{attrs:{src:a.$axios.defaults.baseURL+a.userInfo.head_img}}),t("van-uploader",{staticClass:"uploader",attrs:{"after-read":a.afterRead}})],1),t("Listbar",{attrs:{label:"昵称",tips:a.userInfo.nickname},nativeOn:{click:function(n){a.show=!0}}}),t("van-dialog",{attrs:{title:"修改昵称","show-cancel-button":""},on:{confirm:a.handChangNickname},model:{value:a.show,callback:function(n){a.show=n},expression:"show"}},[t("van-field",{attrs:{placeholder:"请输入用户名"},model:{value:a.nickname,callback:function(n){a.nickname=n},expression:"nickname"}})],1),t("Listbar",{attrs:{label:"密码",tips:"******"},nativeOn:{click:function(n){a.showpassword=!0}}}),t("van-dialog",{attrs:{title:"修改密码","show-cancel-button":""},on:{confirm:a.handChangpassword},model:{value:a.showpassword,callback:function(n){a.showpassword=n},expression:"showpassword"}},[t("van-field",{attrs:{placeholder:"请输入密码",type:"password"},model:{value:a.password,callback:function(n){a.password=n},expression:"password"}})],1),t("Listbar",{attrs:{label:"性别",tips:1==a.userInfo.gender?"男":"女"},nativeOn:{click:function(n){a.showgender=!0}}}),t("van-action-sheet",{attrs:{actions:a.actions,"close-on-click-action":""},on:{select:a.onSelect},model:{value:a.showgender,callback:function(n){a.showgender=n},expression:"showgender"}})],1)},e=[],o=t("2b2e"),i=t("34a6"),r={components:{NavigateBar:o["a"],Listbar:i["a"]},data:function(){return{userInfo:{},userJson:{},nickname:"",password:"",show:!1,showpassword:!1,showgender:!1,actions:[{name:"男",value:1},{name:"女",value:0}]}},mounted:function(){var a=this,n=JSON.parse(localStorage.getItem("userInfo"));this.userJson=n,this.$axios({url:"/user/"+n.user.id,headers:{Authorization:n.token}}).then((function(n){console.log(n);var t=n.data.data;a.userInfo=t,a.nickname=t.nickname}))},methods:{afterRead:function(a){var n=this;console.log(a),console.log(a.file);var t=new FormData;t.append("file",a.file),this.$axios({url:"/upload",method:"POST",headers:{Authorization:this.userJson.token},data:t}).then((function(a){var t=a.data.data.url;n.userInfo.head_img=t,n.handleEdit({head_img:t})}))},handleEdit:function(a){var n=this;return this.$axios({url:"/user_update/"+this.userInfo.id,method:"POST",headers:{Authorization:this.userJson.token},data:a}).then((function(a){n.$toast.success("修改成功")}))},handChangNickname:function(){var a=this,n=this.handleEdit({nickname:this.nickname});n.then((function(){a.userInfo.nickname=a.nickname,console.log(a.nickname)}))},handChangpassword:function(){this.handleEdit({password:this.password})},onSelect:function(a){var n=this,t=this.handleEdit({gender:a.value});t.then((function(){n.userInfo.gender=a.value}))}}},c=r,l=(t("e6a5"),t("2877")),u=Object(l["a"])(c,s,e,!1,null,"47a05492",null);n["default"]=u.exports},e6a5:function(a,n,t){"use strict";var s=t("a655"),e=t.n(s);e.a}}]);
//# sourceMappingURL=chunk-729f928a.8c3806d4.js.map